"use strict";(()=>{var t={};t.id=974,t.ids=[974],t.modules={517:t=>{t.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},8678:t=>{t.exports=import("pg")},7917:(t,e,r)=>{r.a(t,async(t,s)=>{try{r.r(e),r.d(e,{headerHooks:()=>g,originalPathname:()=>y,patchFetch:()=>d,requestAsyncStorage:()=>l,routeModule:()=>c,serverHooks:()=>E,staticGenerationAsyncStorage:()=>p,staticGenerationBailout:()=>k});var a=r(884),o=r(6132),n=r(1040),i=r(8666),u=t([i]);i=(u.then?(await u)():u)[0];let c=new a.AppRouteRouteModule({definition:{kind:o.x.APP_ROUTE,page:"/api/tasks/[id]/route",pathname:"/api/tasks/[id]",filename:"route",bundlePath:"app/api/tasks/[id]/route"},resolvedPagePath:"C:\\Users\\HAROON TRADERS\\OneDrive\\Desktop\\hackthon 2\\frontend\\app\\api\\tasks\\[id]\\route.ts",nextConfigOutput:"",userland:i}),{requestAsyncStorage:l,staticGenerationAsyncStorage:p,serverHooks:E,headerHooks:g,staticGenerationBailout:k}=c,y="/api/tasks/[id]/route";function d(){return(0,n.patchFetch)({serverHooks:E,staticGenerationAsyncStorage:p})}s()}catch(t){s(t)}})},8666:(t,e,r)=>{r.a(t,async(t,s)=>{try{r.r(e),r.d(e,{DELETE:()=>c,GET:()=>u,PUT:()=>d});var a=r(5798),o=r(8678),n=t([o]);o=(n.then?(await n)():n)[0];let l=new o.Pool({connectionString:process.env.DATABASE_URL||"postgresql://neondb_owner:npg_X1j5vWxfkBpH@ep-bitter-brook-ad70lb1c-pooler.c-2.us-east-1.aws.neon.tech/neondb?sslmode=require&channel_binding=require",ssl:{rejectUnauthorized:!1}});function i(t){return{id:Number(t.id),title:String(t.title),description:t.description?String(t.description):null,status:String(t.status),priority:String(t.priority),category:t.category?String(t.category):null,due_date:t.due_date?String(t.due_date):null,created_at:String(t.created_at),updated_at:String(t.updated_at)}}async function u(t,{params:e}){try{console.log("GET task ID:",e.id);let t=parseInt(e.id),r=await l.query("SELECT * FROM tasks WHERE id = $1",[t]);if(0===r.rows.length)return a.Z.json({error:"Task not found"},{status:404});let s=i(r.rows[0]);return a.Z.json(s)}catch(t){return console.error("Get task API error:",t),a.Z.json({error:"Database error"},{status:500})}}async function d(t,{params:e}){try{console.log("PUT task ID:",e.id);let r=parseInt(e.id),s=await t.json(),o=await l.query("SELECT id FROM tasks WHERE id = $1",[r]);if(0===o.rows.length)return a.Z.json({error:"Task not found"},{status:404});let{title:n,description:u,status:d,priority:c,category:p,due_date:E}=s,g=await l.query(`UPDATE tasks 
       SET title = COALESCE($1, title),
           description = COALESCE($2, description),
           status = COALESCE($3, status),
           priority = COALESCE($4, priority),
           category = COALESCE($5, category),
           due_date = COALESCE($6, due_date),
           updated_at = NOW()
       WHERE id = $7
       RETURNING *`,[n,u,d,c,p,E,r]),k=i(g.rows[0]);return console.log("PUT successful:",k),a.Z.json(k)}catch(t){return console.error("Update task API error:",t),a.Z.json({error:"Database error"},{status:500})}}async function c(t,{params:e}){try{console.log("DELETE task ID:",e.id);let t=parseInt(e.id),r=await l.query("SELECT id FROM tasks WHERE id = $1",[t]);if(0===r.rows.length)return a.Z.json({error:"Task not found"},{status:404});return await l.query("DELETE FROM tasks WHERE id = $1",[t]),console.log("DELETE successful"),a.Z.json({message:"Task deleted successfully"})}catch(t){return console.error("Delete task API error:",t),a.Z.json({error:"Database error"},{status:500})}}s()}catch(t){s(t)}})}};var e=require("../../../../webpack-runtime.js");e.C(t);var r=t=>e(e.s=t),s=e.X(0,[271,107],()=>r(7917));module.exports=s})();
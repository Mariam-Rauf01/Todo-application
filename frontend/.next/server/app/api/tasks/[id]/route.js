"use strict";(()=>{var t={};t.id=974,t.ids=[974],t.modules={517:t=>{t.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},8678:t=>{t.exports=import("pg")},3903:(t,e,r)=>{let s;r.r(e),r.d(e,{headerHooks:()=>h,originalPathname:()=>R,patchFetch:()=>C,requestAsyncStorage:()=>y,routeModule:()=>f,serverHooks:()=>T,staticGenerationAsyncStorage:()=>S,staticGenerationBailout:()=>A});var a={};r.r(a),r.d(a,{DELETE:()=>k,GET:()=>E,PUT:()=>g});var n=r(884),o=r(6132),i=r(1040),u=r(5798);async function d(){if(!s){let t=await Promise.resolve().then(r.bind(r,8678));s=t.Pool}return s}let c=()=>process.env.DATABASE_URL||"postgresql://neondb_owner:npg_X1j5vWxfkBpH@ep-bitter-brook-ad70lb1c-pooler.c-2.us-east-1.aws.neon.tech/neondb?sslmode=require&channel_binding=require";async function l(t,e=[]){let r=await d(),s=new r({connectionString:c(),ssl:{rejectUnauthorized:!1}});try{let r=await s.query(t,e);return r.rows}finally{await s.end()}}function p(t){return{id:Number(t.id),title:String(t.title),description:t.description?String(t.description):null,status:String(t.status),priority:String(t.priority),category:t.category?String(t.category):null,due_date:t.due_date?String(t.due_date):null,created_at:String(t.created_at),updated_at:String(t.updated_at)}}async function E(t,{params:e}){try{console.log("GET task ID:",e.id);let t=parseInt(e.id),r=await l("SELECT * FROM tasks WHERE id = $1",[t]);if(0===r.length)return u.Z.json({error:"Task not found"},{status:404});let s=p(r[0]);return u.Z.json(s)}catch(t){return console.error("Get task API error:",t),u.Z.json({error:"Database error"},{status:500})}}async function g(t,{params:e}){try{console.log("PUT task ID:",e.id);let r=parseInt(e.id),s=await t.json(),a=await l("SELECT id FROM tasks WHERE id = $1",[r]);if(0===a.length)return u.Z.json({error:"Task not found"},{status:404});let{title:n,description:o,status:i,priority:d,category:c,due_date:E}=s,g=await l(`UPDATE tasks 
       SET title = COALESCE($1, title),
           description = COALESCE($2, description),
           status = COALESCE($3, status),
           priority = COALESCE($4, priority),
           category = COALESCE($5, category),
           due_date = COALESCE($6, due_date),
           updated_at = NOW()
       WHERE id = $7
       RETURNING *`,[n,o,i,d,c,E,r]),k=p(g[0]);return console.log("PUT successful:",k),u.Z.json(k)}catch(t){return console.error("Update task API error:",t),u.Z.json({error:"Database error"},{status:500})}}async function k(t,{params:e}){try{console.log("DELETE task ID:",e.id);let t=parseInt(e.id),r=await l("SELECT id FROM tasks WHERE id = $1",[t]);if(0===r.length)return u.Z.json({error:"Task not found"},{status:404});return await l("DELETE FROM tasks WHERE id = $1",[t]),console.log("DELETE successful"),u.Z.json({message:"Task deleted successfully"})}catch(t){return console.error("Delete task API error:",t),u.Z.json({error:"Database error"},{status:500})}}let f=new n.AppRouteRouteModule({definition:{kind:o.x.APP_ROUTE,page:"/api/tasks/[id]/route",pathname:"/api/tasks/[id]",filename:"route",bundlePath:"app/api/tasks/[id]/route"},resolvedPagePath:"c:\\Users\\HAROON TRADERS\\OneDrive\\Desktop\\hackthon 2\\frontend\\app\\api\\tasks\\[id]\\route.ts",nextConfigOutput:"",userland:a}),{requestAsyncStorage:y,staticGenerationAsyncStorage:S,serverHooks:T,headerHooks:h,staticGenerationBailout:A}=f,R="/api/tasks/[id]/route";function C(){return(0,i.patchFetch)({serverHooks:T,staticGenerationAsyncStorage:S})}}};var e=require("../../../../webpack-runtime.js");e.C(t);var r=t=>e(e.s=t),s=e.X(0,[271,107],()=>r(3903));module.exports=s})();
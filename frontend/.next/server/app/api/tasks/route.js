"use strict";(()=>{var e={};e.id=495,e.ids=[495],e.modules={517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},8678:e=>{e.exports=import("pg")},2441:(e,t,r)=>{r.a(e,async(e,a)=>{try{r.r(t),r.d(t,{headerHooks:()=>T,originalPathname:()=>E,patchFetch:()=>c,requestAsyncStorage:()=>d,routeModule:()=>l,serverHooks:()=>g,staticGenerationAsyncStorage:()=>p,staticGenerationBailout:()=>A});var n=r(884),s=r(6132),o=r(1040),i=r(4384),u=e([i]);i=(u.then?(await u)():u)[0];let l=new n.AppRouteRouteModule({definition:{kind:s.x.APP_ROUTE,page:"/api/tasks/route",pathname:"/api/tasks",filename:"route",bundlePath:"app/api/tasks/route"},resolvedPagePath:"C:\\Users\\HAROON TRADERS\\OneDrive\\Desktop\\hackthon 2\\frontend\\app\\api\\tasks\\route.ts",nextConfigOutput:"",userland:i}),{requestAsyncStorage:d,staticGenerationAsyncStorage:p,serverHooks:g,headerHooks:T,staticGenerationBailout:A}=l,E="/api/tasks/route";function c(){return(0,o.patchFetch)({serverHooks:g,staticGenerationAsyncStorage:p})}a()}catch(e){a(e)}})},4384:(e,t,r)=>{r.a(e,async(e,a)=>{try{r.r(t),r.d(t,{GET:()=>u,POST:()=>c});var n=r(5798),s=r(8678),o=e([s]);s=(o.then?(await o)():o)[0];let l=new s.Pool({connectionString:process.env.DATABASE_URL||"postgresql://neondb_owner:npg_X1j5vWxfkBpH@ep-bitter-brook-ad70lb1c-pooler.c-2.us-east-1.aws.neon.tech/neondb?sslmode=require&channel_binding=require",ssl:{rejectUnauthorized:!1}});function i(e){return{id:Number(e.id),title:String(e.title),description:e.description?String(e.description):null,status:String(e.status),priority:String(e.priority),category:e.category?String(e.category):null,due_date:e.due_date?String(e.due_date):null,created_at:String(e.created_at),updated_at:String(e.updated_at)}}async function u(e){try{console.log("GET all tasks - from Neon database");let e=await l.query("SELECT * FROM tasks ORDER BY created_at DESC"),t=e.rows.map(i);return console.log("Returning tasks:",t.length),n.Z.json(t)}catch(e){return console.error("Tasks API error:",e),n.Z.json({error:"Database error"},{status:500})}}async function c(e){try{console.log("POST create task - to Neon database");let t=await e.json(),{title:r,description:a,due_date:s,priority:o,category:u,status:c}=t;if(!r)return n.Z.json({error:"Title is required"},{status:400});let d=await l.query(`INSERT INTO tasks (title, description, status, priority, category, due_date, user_id)
       VALUES ($1, $2, $3, $4, $5, $6, 1)
       RETURNING *`,[r,a||null,c||"pending",o||"medium",u||null,s||null]),p=i(d.rows[0]);return console.log("Task created successfully:",p),n.Z.json(p,{status:201})}catch(e){return console.error("Create task API error:",e),n.Z.json({error:"Database error: "+String(e)},{status:500})}}(async function(){let e=await l.connect();try{await e.query(`
      CREATE TABLE IF NOT EXISTS tasks (
        id SERIAL PRIMARY KEY,
        title VARCHAR(255) NOT NULL,
        description TEXT,
        status VARCHAR(50) DEFAULT 'pending',
        priority VARCHAR(20) DEFAULT 'medium',
        category VARCHAR(100),
        due_date TIMESTAMP,
        user_id INTEGER DEFAULT 1,
        created_at TIMESTAMP DEFAULT NOW(),
        updated_at TIMESTAMP DEFAULT NOW()
      )
    `),console.log("Database tables initialized")}catch(e){console.error("DB init error:",e)}finally{e.release()}})(),a()}catch(e){a(e)}})}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),a=t.X(0,[271,107],()=>r(2441));module.exports=a})();
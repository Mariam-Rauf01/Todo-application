"use strict";(()=>{var e={};e.id=495,e.ids=[495],e.modules={517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},8678:e=>{e.exports=import("pg")},2096:(e,t,r)=>{let a;r.r(t),r.d(t,{headerHooks:()=>y,originalPathname:()=>h,patchFetch:()=>_,requestAsyncStorage:()=>E,routeModule:()=>A,serverHooks:()=>S,staticGenerationAsyncStorage:()=>R,staticGenerationBailout:()=>k});var n={};r.r(n),r.d(n,{GET:()=>g,POST:()=>T});var o=r(884),s=r(6132),i=r(1040),u=r(5798);async function l(){if(!a){let e=await Promise.resolve().then(r.bind(r,8678));a=e.Pool}return a}let c=()=>process.env.DATABASE_URL||"postgresql://neondb_owner:npg_X1j5vWxfkBpH@ep-bitter-brook-ad70lb1c-pooler.c-2.us-east-1.aws.neon.tech/neondb?sslmode=require&channel_binding=require";async function d(e,t=[]){let r=await l(),a=new r({connectionString:c(),ssl:{rejectUnauthorized:!1}});try{let r=await a.query(e,t);return r.rows}finally{await a.end()}}function p(e){return{id:Number(e.id),title:String(e.title),description:e.description?String(e.description):null,status:String(e.status),priority:String(e.priority),category:e.category?String(e.category):null,due_date:e.due_date?String(e.due_date):null,created_at:String(e.created_at),updated_at:String(e.updated_at)}}async function g(e){try{console.log("GET all tasks - from Neon database");let e=await d("SELECT * FROM tasks ORDER BY created_at DESC"),t=e.map(p);return console.log("Returning tasks:",t.length),u.Z.json(t)}catch(e){return console.error("Tasks API error:",e),u.Z.json({error:"Database error"},{status:500})}}async function T(e){try{console.log("POST create task - to Neon database");let t=await e.json(),{title:r,description:a,due_date:n,priority:o,category:s,status:i}=t;if(!r)return u.Z.json({error:"Title is required"},{status:400});let l=await d(`INSERT INTO tasks (title, description, status, priority, category, due_date, user_id)
       VALUES ($1, $2, $3, $4, $5, $6, 1)
       RETURNING *`,[r,a||null,i||"pending",o||"medium",s||null,n||null]),c=p(l[0]);return console.log("Task created successfully:",c),u.Z.json(c,{status:201})}catch(e){return console.error("Create task API error:",e),u.Z.json({error:"Database error: "+String(e)},{status:500})}}(async function(){try{await d(`
      CREATE TABLE IF NOT EXISTS tasks (
        id SERIAL PRIMARY KEY,
        title VARCHAR(255) NOT NULL,
        description TEXT,
        status VARCHAR(50) DEFAULT 'pending',
        priority VARCHAR(20) DEFAULT 'medium',
        category VARCHAR(100),
        due_date TIMESTAMP,
        user_id INTEGER DEFAULT 1,
        created_at TIMESTAMP DEFAULT NOW(),
        updated_at TIMESTAMP DEFAULT NOW()
      )
    `),console.log("Database tables initialized")}catch(e){console.error("DB init error:",e)}})();let A=new o.AppRouteRouteModule({definition:{kind:s.x.APP_ROUTE,page:"/api/tasks/route",pathname:"/api/tasks",filename:"route",bundlePath:"app/api/tasks/route"},resolvedPagePath:"c:\\Users\\HAROON TRADERS\\OneDrive\\Desktop\\hackthon 2\\frontend\\app\\api\\tasks\\route.ts",nextConfigOutput:"",userland:n}),{requestAsyncStorage:E,staticGenerationAsyncStorage:R,serverHooks:S,headerHooks:y,staticGenerationBailout:k}=A,h="/api/tasks/route";function _(){return(0,i.patchFetch)({serverHooks:S,staticGenerationAsyncStorage:R})}}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),a=t.X(0,[271,107],()=>r(2096));module.exports=a})();
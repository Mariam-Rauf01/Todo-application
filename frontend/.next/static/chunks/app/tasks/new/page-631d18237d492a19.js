(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[452],{4095:function(e,t,s){Promise.resolve().then(s.bind(s,5609))},5609:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return l}});var a=s(7437),o=s(2265),r=s(4033);function l(e){let{taskId:t,initialData:s}=e,[l,n]=(0,o.useState)((null==s?void 0:s.title)||""),[i,d]=(0,o.useState)((null==s?void 0:s.description)||""),[c,u]=(0,o.useState)((null==s?void 0:s.due_date)||""),[m,x]=(0,o.useState)((null==s?void 0:s.priority)||"medium"),[p,f]=(0,o.useState)((null==s?void 0:s.category)||""),[h,b]=(0,o.useState)(""),[g,y]=(0,o.useState)(!1),k=(0,r.useRouter)();(0,o.useEffect)(()=>{t&&v()},[t]);let v=async()=>{y(!0);try{console.log("Fetching task data for ID:",t);let e=await fetch("/api/tasks/".concat(t));if(console.log("Fetch task response status:",e.status),e.ok){let t=await e.json();console.log("Fetched task data:",t),n(t.title||""),d(t.description||""),u(t.due_date?t.due_date.split("T")[0]:""),x(t.priority||"medium"),f(t.category||"")}else console.error("Failed to load task data, status:",e.status),b("Failed to load task data")}catch(e){console.error("Error loading task data:",e),b("Error loading task data")}finally{y(!1)}},j=async e=>{e.preventDefault();try{let e;console.log("Submitting task form, taskId:",t);let s={title:l,description:i||null,due_date:c||null,priority:m,category:p||null,recurrence_pattern:null};if(console.log("Task data to submit:",s),e=t?await fetch("/api/tasks/".concat(t),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)}):await fetch("/api/tasks/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)}),console.log("Submit response status:",e.status),e.ok)console.log("Task saved successfully"),k.push("/tasks"),k.refresh();else{let t=await e.json();console.error("Failed to save task:",t),b(t.detail||"Failed to save task")}}catch(e){console.error("Error saving task:",e),b("Error saving task")}};return g?(0,a.jsx)("div",{className:"max-w-2xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:(0,a.jsx)("div",{className:"text-center",children:"Loading task data..."})}):(0,a.jsxs)("div",{className:"max-w-2xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold text-gray-900 mb-6",children:t?"Edit Task":"Create New Task"}),(0,a.jsxs)("form",{onSubmit:j,className:"space-y-6",children:[h&&(0,a.jsx)("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative",role:"alert",children:(0,a.jsx)("span",{className:"block sm:inline",children:h})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"title",className:"block text-sm font-medium text-gray-700",children:"Title *"}),(0,a.jsx)("input",{type:"text",id:"title",value:l,onChange:e=>n(e.target.value),required:!0,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700",children:"Description"}),(0,a.jsx)("textarea",{id:"description",value:i,onChange:e=>d(e.target.value),rows:3,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"dueDate",className:"block text-sm font-medium text-gray-700",children:"Due Date"}),(0,a.jsx)("input",{type:"date",id:"dueDate",value:c,onChange:e=>u(e.target.value),className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"priority",className:"block text-sm font-medium text-gray-700",children:"Priority"}),(0,a.jsxs)("select",{id:"priority",value:m,onChange:e=>x(e.target.value),className:"mt-1 block w-full bg-white border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",children:[(0,a.jsx)("option",{value:"low",children:"Low"}),(0,a.jsx)("option",{value:"medium",children:"Medium"}),(0,a.jsx)("option",{value:"high",children:"High"})]})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"category",className:"block text-sm font-medium text-gray-700",children:"Category"}),(0,a.jsx)("input",{type:"text",id:"category",value:p,onChange:e=>f(e.target.value),className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm"})]}),(0,a.jsxs)("div",{className:"flex justify-end space-x-3",children:[(0,a.jsx)("a",{href:"/tasks",className:"bg-gray-200 hover:bg-gray-300 text-gray-800 py-2 px-4 rounded-md",children:"Cancel"}),(0,a.jsx)("button",{type:"submit",className:"bg-blue-600 hover:bg-blue-700 text-white py-2 px-4 rounded-md",children:t?"Update Task":"Create Task"})]})]})]})}},622:function(e,t,s){"use strict";var a=s(2265),o=Symbol.for("react.element"),r=Symbol.for("react.fragment"),l=Object.prototype.hasOwnProperty,n=a.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,i={key:!0,ref:!0,__self:!0,__source:!0};function d(e,t,s){var a,r={},d=null,c=null;for(a in void 0!==s&&(d=""+s),void 0!==t.key&&(d=""+t.key),void 0!==t.ref&&(c=t.ref),t)l.call(t,a)&&!i.hasOwnProperty(a)&&(r[a]=t[a]);if(e&&e.defaultProps)for(a in t=e.defaultProps)void 0===r[a]&&(r[a]=t[a]);return{$$typeof:o,type:e,key:d,ref:c,props:r,_owner:n.current}}t.Fragment=r,t.jsx=d,t.jsxs=d},7437:function(e,t,s){"use strict";e.exports=s(622)},4033:function(e,t,s){e.exports=s(94)}},function(e){e.O(0,[971,472,744],function(){return e(e.s=4095)}),_N_E=e.O()}]);